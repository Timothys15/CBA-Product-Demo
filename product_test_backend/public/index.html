<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="content-type" 
        content="text/html; 
        charset=utf-8" />
        <title> Index </title>
    </head>

    <body>
        <h1> Product Demo </h1>
        <p>
            <ul>
                <li>"createModel" which will take the input parameters of model_name and timestamp</li>
                <li>The service should be able to validate the inputs, generating a unique id</li>
                <li>The information is then stored into the Database</li>
                <li>Create another service called "addDocument", this accepts the parameters of model_id and plan_text</li>
                <li>This service will be able to do string tokenisation and store the information into the Database</li>
            </ul>
        </p>
    

    <h2>Create a Model</h2>

    <div class="form_container1">
        <form action="/create" method="post">
            <div class="form-container">
                <label class="form_label"> Model Name: </label>
    
                <div class="form_input_box"> 
                    <input type="text" name="model_name" description"Model_Name" title="Model Name" required pattern="[a-zA-Z0-9]{4,}">
                    <br><br>
                </div> 
    
                <label class="form_label"> Timestamp: </label>
                <div class="form_input_box">
                    <input type="text" name="timestamp" description"Time_Stamp" title="Timestamp">
                    <br><br>
                </div>

                <div class="buttons_container">
                    <button class="post_button" type="submit" value="Post"> Submit </button>
                    <button class="reset_button" type="reset" value="Reset"> Reset </button>
                </div>
            </div>
        </form>
    </div> 

    <br><br>

    <h2>Add a document!</h2>
    <div class="form_container2">
        <form action="/add-document" method="post">
            <div class="form-container">
                <label class="form_label"> Model name: </label>    
                <div class="form_input_box"> 
                    <!--//required pattern="(S{1}\d{4})"-->
                    <input type="text" name="model_name" description"Model_ID" title="Model Name" > 
                    <br><br>
                </div>
    
                <label class="form_label"> Text: </label>
                <div class="form_input_box">
                    <input type="text" name="plain_text" description"Plain_Text" title="Plain Text" required pattern="{1,}">
                    <br><br>
                </div>

                <div class="buttons_container">
                    <button class="post_button" type="submit" value="Post"> Submit </button>
                    <button class="reset_button" type="reset" value="Reset"> Reset </button>
                </div>
            </div>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script type="text/javascript">
        $(document).ready(() => {
            $('#searchName').click(() => {
                var getDataUrl = 'get-data/'+ $("#testtextbox").val();
                $.ajax({
                    url: getDataUrl,
                    type: 'GET',
                    dataType: 'json',
                    success: (data) => {
                        var result = `<h2>`+$("#testtextbox").val()+` Documents</h2>`;
                        var docNum = 1;
                        var tokenNum = 1;

                        data.forEach((entry) => {
                            const { _id, model_name, plain_text, tokenized_text } = entry;
                            
                            result +=
                                `<div>
                                    <h4>Document ${docNum}</h4>
                                        <ul>
                                           <li>Plain Text: ${plain_text}</li>`+
                                            tokenized_text.forEach((token) => {
                                                var keys = Object.keys(token);
                                                //const { type, value } = token;

                                                `<li>Token ${tokenNum}: ${keys}</li>`
                                            })
                                           +`
                                        </ul>
                                </div>`;

                            docNum++;
                            
                            document.getElementById('displayDocs').innerHTML = result;
                        });

                    }
                });   
            });
        });
    </script>    

        <h2>Search via Model Name </h2>
        <label>Model Name:</label>
        <div class="buttons_container">
            <input type="text" id="testtextbox" name="inputName" description="Input ID" title="Search ID" >
            </br></br>
            <button id="searchName" class="post_button" type="button" value="search"> Search </button>
        </div>
        
    <p id="displayDocs"></p>


    </body>
</html>